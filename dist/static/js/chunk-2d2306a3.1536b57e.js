(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2306a3"],{ebd4:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Row",[a("Card",{staticClass:"content-wrapper"},[a("Tabs",{attrs:{value:"MarkDown",animated:!1}},[a("TabPane",{attrs:{label:"MarkDown",name:"MarkDown"}},[a("mavon-editor",{style:{zIndex:e.zIndex},on:{change:e.handleMavonChange,save:e.handleMavonSave,fullScreen:e.handleMavonFullScreen},model:{value:e.editorContent,callback:function(t){e.editorContent=t},expression:"editorContent"}})],1),a("TabPane",{attrs:{label:"富文本",name:"RichText",disabled:""}},[a("i-input",{attrs:{type:"textarea",autosize:{minRows:10},placeholder:"请输入文章内容(富文本)"},model:{value:e.formValidate.content,callback:function(t){e.$set(e.formValidate,"content",t)},expression:"formValidate.content"}})],1)],1)],1),a("divider",[e._v("请填写文章的其他信息")]),a("Row",{staticStyle:{"justify-content":"center"},attrs:{type:"flex"}},[a("i-col",{attrs:{xs:24,lg:12}},[a("Card",{staticClass:"info-wrapper"},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"标题",prop:"title"}},[a("i-input",{attrs:{placeholder:"请输入标题..."},model:{value:e.formValidate.title,callback:function(t){e.$set(e.formValidate,"title",t)},expression:"formValidate.title"}})],1),a("FormItem",{attrs:{label:"分类",prop:"category"}},[a("Select",{attrs:{placeholder:"请选择文章分类"},model:{value:e.formValidate.category,callback:function(t){e.$set(e.formValidate,"category",t)},expression:"formValidate.category"}},e._l(e.blogCategories,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("FormItem",{attrs:{label:"标签",prop:"tags"}},[a("Select",{attrs:{multiple:"",placeholder:"请选择文章标签"},model:{value:e.formValidate.tags,callback:function(t){e.$set(e.formValidate,"tags",t)},expression:"formValidate.tags"}},e._l(e.blogTags,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("FormItem",{attrs:{label:"简介",prop:"brief"}},[a("i-input",{attrs:{type:"textarea",autosize:{minRows:2},placeholder:"请输入120字内的简介"},model:{value:e.formValidate.brief,callback:function(t){e.$set(e.formValidate,"brief",t)},expression:"formValidate.brief"}})],1),a("FormItem",{attrs:{label:"封面",prop:"cover",required:""}},[a("Upload",{attrs:{type:"drag",action:"/",format:["jpg","jpeg","png"],"max-size":10240,"before-upload":e.handleBeforeUpload}},[a("div",{staticStyle:{padding:"20px 0"}},[a("div",[a("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),a("p",[e._v("点击选择或拖动图片来上传")])],1),e.formValidate.cover?a("div",[a("img",{attrs:{src:e.formValidate.cover.url,alt:""}})]):e._e()])]),e.formValidate.cover?a("div",[e._v("已上传："+e._s(e.formValidate.cover.name))]):e._e()],1),a("FormItem",[a("Button",{staticStyle:{float:"right"},attrs:{type:"warning"},on:{click:e.handleSubmitArticle}},[e._v("发布文章")]),a("Button",{attrs:{type:"primary"},on:{click:e.handleReset}},[e._v("重置表单")])],1)],1)],1)],1)],1)],1)},o=[],l=(a("4160"),a("159b"),a("5530")),n=a("2f62"),i={name:"BlogCreate",data:function(){return{editorType:"markdown",zIndex:900,editorContent:"",formValidate:{title:"",category:"",tags:[],cover:null,brief:"",content:""},ruleValidate:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],category:[{type:"number",required:!0,message:"分类是必填的",trigger:"change"}],tags:[{type:"array",required:!0,message:"标签是必填的",trigger:"change"}],brief:[{required:!0,message:"简介不能为空",trigger:"blur"},{type:"string",max:120,message:"简介应小于120个字",trigger:"blur"}]}}},computed:Object(l["a"])({},Object(n["c"])(["blogCategories","blogTags"])),methods:{handleMavonChange:function(e,t){this.formValidate.content=t},handleMavonSave:function(e,t){return t},handleMavonFullScreen:function(e){this.zIndex=!0===e?1500:900},handleBeforeUpload:function(e){return this.formValidate.cover=e,!1},handleSubmitArticle:function(){var e=this;this.$refs.formValidate.validate((function(t){if(e.formValidate.content.length<10)return e.$Message.error("请填写文章内容"),!1;if(t){var a=new FormData;a.append("category",e.formValidate.category),e.formValidate.tags.forEach((function(e){a.append("tags",e)})),a.append("title",e.formValidate.title),a.append("brief",e.formValidate.brief),a.append("cover",e.formValidate.cover),a.append("content",e.formValidate.content),e.$api.blog.blogCreate(a).then((function(t){e.$router.push({name:"blog-detail",params:{articleId:t.data.id}}),console.log(t),e.$Message.success("发布成功！")})).catch((function(t){console.log(t),e.$Message.error("请先登录！")}))}else e.$Message.error("表单有误，请检查！")}))},handleReset:function(){this.$refs.formValidate.resetFields()}}},s=i,d=a("2877"),c=Object(d["a"])(s,r,o,!1,null,"7511200f",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d2306a3.1536b57e.js.map